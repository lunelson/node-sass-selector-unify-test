@function base-class($base) {
  @return selector-parse('[class^="#{$base}-"], [class*=" #{$base}-"]');
}

#{base-class('a')} {
  color: blue;
  & > * {
    @at-root #{selector-unify(&, base-class('b'))} {
      color: red;
    }
  }
}

// NB the following works; so this seems to be a problem with running a function inside of the selector-unify function

// [class^="a-"], [class*=" a-"] {
//   color: blue;
//   @at-root #{selector-unify(&, selector-parse('[class^="b-"], [class*=" b-"]'))} {
//     color: red;
//   }
// }
